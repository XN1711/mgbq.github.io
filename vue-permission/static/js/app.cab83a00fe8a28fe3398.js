webpackJsonp([7],{"9ebC":function(e,t,n){"use strict";t.a=["Span","Pagination","Switch","Button","Table","table-column","Breadcrumb","breadcrumb-item","Tabs","tab-pane"]},E4LH:function(e,t,n){"use strict";t.a=r;var o=n("3cXf"),a=n.n(o);function r(e){if("boolean"==typeof e)return!1;if(e instanceof Array){if(0===e.length)return!0}else{if(!(e instanceof Object))return"null"===e||null==e||"undefined"===e||void 0===e||""===e;if("{}"===a()(e))return!0}return!1}},EBaU:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",function(){return setStore}),__webpack_require__.d(__webpack_exports__,"a",function(){return getStore}),__webpack_require__.d(__webpack_exports__,"b",function(){return removeStore});var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__=__webpack_require__("3cXf"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_typeof__=__webpack_require__("hRKE"),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_typeof___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_typeof__),__WEBPACK_IMPORTED_MODULE_2__utils_validate__=__webpack_require__("E4LH"),setStore=function(e){var t=e.name,n=e.content,o=e.type,a={dataType:void 0===n?"undefined":__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_typeof___default()(n),content:n,type:o,datetime:(new Date).getTime()};o?window.sessionStorage.setItem(t,__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(a)):window.localStorage.setItem(t,__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(a))},getStore=function getStore(params){var name=params.name,obj={},content=void 0;if(obj=window.localStorage.getItem(name),Object(__WEBPACK_IMPORTED_MODULE_2__utils_validate__.a)(obj)&&(obj=window.sessionStorage.getItem(name)),!Object(__WEBPACK_IMPORTED_MODULE_2__utils_validate__.a)(obj))return obj=JSON.parse(obj),"string"===obj.dataType?content=obj.content:"number"===obj.dataType?content=Number(obj.content):"boolean"===obj.dataType?content=eval(obj.content):"object"===obj.dataType&&(content=obj.content),content},removeStore=function(e){var t=e.name;window.localStorage.removeItem(t),window.sessionStorage.removeItem(t)},getAllStore=function(e){for(var t=[],n=e.type,o=1;o<=window.sessionStorage.length;o++)n?t.push({name:window.sessionStorage.key(o),content:getStore({name:window.sessionStorage.key(o),type:"session"})}):t.push(getStore({name:window.localStorage.key(o),content:getStore({name:window.localStorage.key(o)})}));return t},clearStore=function(e){e.type?window.sessionStorage.clear():window.localStorage.clear()}},IcnI:function(e,t,n){"use strict";var o=n("MVMM"),a=n("9rMa"),r=n("uAC3"),c=n.n(r),i={state:{language:c.a.get("language")||"en"},mutations:{SET_LANGUAGE:function(e,t){e.language=t,c.a.set("language",t)}},actions:{setLanguage:function(e,t){(0,e.commit)("SET_LANGUAGE",t)}}},u=n("rVsN"),s=n.n(u),l=n("aozt"),_=n.n(l),d=n("xYCT"),m=n("TIfe"),f=_.a.create({baseURL:"https://easy-mock.com/mock/5a72c1ecc76727050336e0bc/mdm/",timeout:15e3});f.interceptors.request.use(function(e){return w.getters.token&&(e.headers["X-Token"]=Object(m.a)()),e},function(e){console.log(e),s.a.reject(e)}),f.interceptors.response.use(function(e){var t=e.data;return 2e4!==t.code?(Object(d.Message)({message:t.data,type:"error",duration:5e3}),50008!==t.code&&50012!==t.code&&50014!==t.code||d.MessageBox.confirm("你已被登出，可以取消继续留在该页面，或者重新登录","确定登出",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then(function(){w.dispatch("FedLogOut").then(function(){location.reload()})}),s.a.reject("error")):e.data},function(e){return console.log("err"+e),Object(d.Message)({message:e.message,type:"error",duration:5e3}),s.a.reject(e)});var p=f;var b=n("EBaU"),g={state:{token:Object(m.a)(),name:"",avatar:"",roles:[],isLock:Object(b.a)({name:"isLock"})||!1,lockPasswd:Object(b.a)({name:"lockPasswd"})||""},mutations:{SET_TOKEN:function(e,t){e.token=t},SET_NAME:function(e,t){e.name=t},SET_AVATAR:function(e,t){e.avatar=t},SET_ROLES:function(e,t){e.roles=t},SET_LOCK_PASSWD:function(e,t){e.lockPasswd=t,Object(b.c)({name:"lockPasswd",content:e.lockPasswd,type:"session"})},SET_LOCK:function(e,t){e.isLock=!0,Object(b.c)({name:"isLock",content:e.isLock,type:"session"})},CLEAR_LOCK:function(e,t){e.isLock=!1,e.lockPasswd="",Object(b.b)({name:"lockPasswd"}),Object(b.b)({name:"isLock"})}},actions:{Login:function(e,t){var n=e.commit,o=t.username.trim();return new s.a(function(e,a){(function(e,t){return p({url:"/user/login",method:"post",data:{username:e,password:t}})})(o,t.password).then(function(t){var o=t.data;Object(m.c)(o.token),n("SET_TOKEN",o.token),e()}).catch(function(e){a(e)})})},GetInfo:function(e){var t=e.commit,n=e.state;return new s.a(function(e,o){var a;(a=n.token,p({url:"/user/info",method:"get",params:{token:a}})).then(function(n){var o=n.data;t("SET_ROLES",o.roles),t("SET_NAME",o.name),t("SET_AVATAR",o.avatar),e(n)}).catch(function(e){o(e)})})},LogOut:function(e){var t=e.commit,n=e.state;return new s.a(function(e,o){(n.token,p({url:"/user/logout",method:"post"})).then(function(){t("SET_TOKEN",""),t("SET_ROLES",[]),Object(m.b)(),e()}).catch(function(e){o(e)})})},FedLogOut:function(e){var t=e.commit;return new s.a(function(e){t("SET_TOKEN",""),t("CLEAR_LOCK"),Object(m.b)(),e()})}}},h={language:function(e){return e.app.language},token:function(e){return e.user.token},name:function(e){return e.user.name},avatar:function(e){return e.user.avatar},routers:function(e){return e.permission.routers},addRouters:function(e){return e.permission.addRouters},isLock:function(e){return e.user.isLock},lockPasswd:function(e){return e.user.lockPasswd},roles:function(e){return e.user.roles}},E=n("YaEn");var k={state:{routers:E.b,addRouters:[]},mutations:{SET_ROUTERS:function(e,t){e.addRouters=t,e.routers=E.b.concat(t),console.log("state.routers",e.routers)}},actions:{GenerateRoutes:function(e,t){var n=e.commit;return new s.a(function(e){var o=t.roles,a=void 0;o.indexOf("admin")>=0?(console.log("admin>=0"),a=E.a):(console.log("admin<0"),a=function e(t,n){return t.filter(function(t){return!!function(e,t){return!t.meta||!t.meta.roles||e.some(function(e){return t.meta.roles.indexOf(e)>=0})}(n,t)&&(t.children&&t.children.length&&(t.children=e(t.children,n)),!0)})}(E.a,o)),console.log("accessedRouters",a),n("SET_ROUTERS",a),e()})}}},O={state:{isFullScreen:!1},mutations:{toggleFullScreen:function(e){var t=document,n=t.body;e.isFullScreen?(t.exitFullscreen?t.exitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitCancelFullScreen?t.webkitCancelFullScreen():t.msExitFullscreen&&t.msExitFullscreen(),e.isFullScreen=!1):(n.requestFullscreen?n.requestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.webkitRequestFullScreen?n.webkitRequestFullScreen():n.msRequestFullscreen&&n.msRequestFullscreen(),e.isFullScreen=!0)}}};o.default.use(a.a);var S=new a.a.Store({modules:{app:i,user:g,permission:k,fullScreen:O},getters:h}),w=t.a=S},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("MVMM"),a=n("9rMa"),r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var c=n("Z0/y")({name:"App"},r,!1,function(e){n("Ox7z")},null,null).exports,i=n("YaEn"),u=n("IcnI"),s=n("4YfN"),l=n.n(s),_=n("dGcl"),d=n("uAC3"),m=n.n(d),f=n("f1mR"),p=n.n(f),b=n("+DU9"),g=n.n(b);o.default.use(_.a);var h={en:l()({},{navbar:{title:"Automatic charging system",languageSwitch:"languageSwitch",theme:"Theme"},skin:{blue:"blue",green:"green",red:"red",purple:"purple",default:"default"},route:{Readme:"Readme",permission:"permission"}},p.a),zh:l()({},{navbar:{title:"自动化装逼系统",languageSwitch:"语言切换",theme:"主题"},skin:{blue:"天空蓝",green:"典雅绿",red:"樱桃红",purple:"贵族紫",default:"默认"},route:{Readme:"自述",permission:"权限",report:"报表"}},g.a)},E=new _.a({locale:m.a.get("language")||"en",messages:h}),k=n("kOl9"),O=n("xYCT"),S=n.n(O),w=(n("Obzr"),n("x1Tb"),Object({NODE_ENV:"production",BASE_API:"https://easy-mock.com/mock/5a72c1ecc76727050336e0bc/mdm/"}));"development"===w.NODE_ENV||("production"===w.NODE_ENV||w.NODE_ENV);var v=n("TIfe"),T=["/login","/authredirect"];i.c.beforeEach(function(e,t,n){Object(v.a)()?u.a.getters.isLock&&"/lock"!==e.path?n({path:"/lock"}):"/login"===e.path?n():0===u.a.getters.roles.length?(console.log("roles====0"),u.a.dispatch("GetInfo").then(function(t){var o=t.data.roles;console.log("roles?",o),u.a.dispatch("GenerateRoutes",{roles:o}).then(function(){console.log("addrouters",u.a.getters.addRouters),i.c.addRoutes(u.a.getters.addRouters),n(l()({},e,{replace:!0}))})}).catch(function(){u.a.dispatch("FedLogOut").then(function(){O.Message.error("验证失败,请重新登录"),n({path:"/login"})})})):(console.log("====1"),n()):-1!==T.indexOf(e.path)?n():n("/login")}),o.default.use(a.a),o.default.use(S.a,{size:"medium",i18n:function(e,t){return E.t(e,t)}}),localStorage.getItem("themeValue")?k.a.changeTheme(localStorage.getItem("themeValue")):k.a.changeTheme("default"),["567566_r22zi6t8noas8aor"].forEach(function(e){var t,n;t="//at.alicdn.com/t/font_$key.css".replace("$key",e),(n=document.createElement("link")).type="text/css",n.rel="stylesheet",n.href=t,document.getElementsByTagName("head")[0].appendChild(n)}),o.default.config.productionTip=!1,new o.default({el:"#app",router:i.c,store:u.a,i18n:E,components:{App:c},template:"<App/>"})},Obzr:function(e,t){},Ox7z:function(e,t){},TIfe:function(e,t,n){"use strict";t.a=function(){return a.a.get(r)},t.c=function(e){return a.a.set(r,e)},t.b=function(){return a.a.remove(r)};var o=n("uAC3"),a=n.n(o),r="token"},YaEn:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return c});var o=n("MVMM"),a=n("zO6J");o.default.use(a.a);var r=[{path:"/",redirect:"/login",hidden:!0},{path:"/login",name:"登录页面",hidden:!0,component:function(e){return n.e(2).then(function(){var t=[n("ook+")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/lock",hidden:!0,name:"锁屏页",component:function(e){return n.e(4).then(function(){var t=[n("1oB0")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/report",index:"report",meta:{title:"report",icon:"el-icon-tickets"},component:function(e){return n.e(0).then(function(){var t=[n("MpTN")];e.apply(null,t)}.bind(this)).catch(n.oe)},children:[{name:"report",path:"/",meta:{title:"report",icon:"el-icon-tickets"},component:function(e){return n.e(1).then(function(){var t=[n("vaWM")];e.apply(null,t)}.bind(this)).catch(n.oe)}}]},{path:"/Readme",index:"Readme",meta:{title:"Readme",icon:"el-icon-menu"},component:function(e){return n.e(0).then(function(){var t=[n("MpTN")];e.apply(null,t)}.bind(this)).catch(n.oe)},children:[{name:"Readme",path:"/",meta:{title:"Readme",icon:"el-icon-menu"},component:function(e){return n.e(5).then(function(){var t=[n("Kblq")];e.apply(null,t)}.bind(this)).catch(n.oe)}}]}];t.c=new a.a({routes:r});var c=[{path:"/permission",meta:{title:"permission",icon:"el-icon-setting",roles:["admin"]},component:function(e){return n.e(0).then(function(){var t=[n("MpTN")];e.apply(null,t)}.bind(this)).catch(n.oe)},children:[{name:"permission",path:"/permission",meta:{title:"permission",icon:"el-icon-menu",roles:["admin"]},component:function(e){return n.e(3).then(function(){var t=[n("9jHE")];e.apply(null,t)}.bind(this)).catch(n.oe)}}]},{path:"*",redirect:"/404",hidden:!0}]},kOl9:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return a});var o=n("9ebC"),a={changeTheme:function(t){switch(t){case"blue":e(".header").css("background-color","#409eff");break;case"green":e(".header").css("background-color","#009a61");break;case"red":e(".header").css("background-color","#f44336");break;case"purple":e(".header").css("background-color","#7B7DE5");break;default:e(".header").css("background-color","#21baa9")}for(var n=o.a,a=0,r=n.length;a<r;a++){c("../static/theme/"+t+"/"+n[a].toLowerCase()+".css")}function c(e){var t=document.getElementsByTagName("head")[0],n=document.createElement("link");n.href=e,n.rel="stylesheet",n.type="text/css",t.appendChild(n)}localStorage.setItem("themeValue",t)}}}).call(t,n("slT5"))},x1Tb:function(e,t){}},["NHnr"]);